<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Partner with The Mommy Newsletter</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body { background: #FFFFFF; color: #1A1A2E; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; font-size: 16px; line-height: 1.6; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(12px); } to { opacity: 1; transform: translateY(0); } }
    .fade-in { animation: fadeIn 0.4s ease-out both; }
    @keyframes pulse { 0%,100% { opacity: 1; } 50% { opacity: 0.5; } }
    @keyframes pulseGlow { 0%,100% { opacity: 1; box-shadow: 0 0 4px #22C55E; } 50% { opacity: 0.6; box-shadow: 0 0 8px #22C55E, 0 0 16px #22C55E44; } }
    @keyframes chartGlow { 0%,100% { opacity: 0.6; } 50% { opacity: 1; } }
    @keyframes shimmer { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }
    ::selection { background: #E8909C33; }
    input:focus, textarea:focus { border-color: #E8909C !important; box-shadow: 0 0 0 3px #E8909C22 !important; outline: none; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect, useCallback, useRef } = React;

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // CONSTANTS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    const C = {
      bg: "#FFFFFF", card: "#F9FAFB", cardAlt: "#F5F5F5",
      text: "#1A1A2E", muted: "#6B7280", dim: "#9CA3AF",
      border: "#E5E7EB",
      accent: "#E8909C", accentDark: "#D4707E", accentLight: "#FFF1F3",
      blue: "#3B82F6", blueDim: "#EFF6FF",
      green: "#22C55E", greenDark: "#16A34A", greenDim: "#F0FDF4",
      purple: "#7C3AED", purpleDim: "#F5F3FF",
      amber: "#D97706", amberDim: "#FFFBEB",
    };
    const FONT = "-apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif";
    const MONO = "'SF Mono', 'Fira Code', Menlo, Consolas, monospace";
    const MOBILE = 640;
    const TABLET = 1024;

    function useWindowWidth() {
      const [w, setW] = useState(window.innerWidth);
      useEffect(() => { const h = () => setW(window.innerWidth); window.addEventListener("resize", h); return () => window.removeEventListener("resize", h); }, []);
      return w;
    }

    const num = (v) => (v || 0).toLocaleString();
    const money = (v) => "$" + (v || 0).toLocaleString();

    function useCountUp(target, duration = 1500) {
      const [value, setValue] = useState(0);
      useEffect(() => {
        if (!target) return;
        const n = typeof target === "string" ? parseInt(target.replace(/[^0-9]/g, ""), 10) : target;
        if (!n || isNaN(n)) return;
        const start = performance.now();
        function update(now) {
          const elapsed = now - start;
          const progress = Math.min(elapsed / duration, 1);
          const eased = 1 - Math.pow(1 - progress, 3);
          setValue(Math.round(n * eased));
          if (progress < 1) requestAnimationFrame(update);
        }
        requestAnimationFrame(update);
      }, [target]);
      return value;
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // PRICING HELPERS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function getPriceAdjustment(subscriberCount, milestones) {
      let adj = 0;
      for (const m of (milestones || [])) {
        if (subscriberCount >= m.subscribers) adj = m.adjustment;
      }
      return adj;
    }

    function getNextMilestone(subscriberCount, milestones) {
      for (const m of (milestones || [])) {
        if (subscriberCount < m.subscribers) return m;
      }
      return null;
    }

    function calcGuarantee(avgOpens, placements, multiplier) {
      const raw = Math.floor(avgOpens * placements * (multiplier || 0.6));
      return Math.floor(raw / 10000) * 10000;
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // SECTION COMPONENTS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    function Section({ children, id, bg, style }) {
      return (
        <section id={id} className="fade-section" style={{ padding: "90px 24px", background: bg || "transparent", ...style }}>
          <div style={{ maxWidth: 1100, margin: "0 auto" }}>{children}</div>
        </section>
      );
    }

    function SectionTitle({ children, sub }) {
      return (
        <div style={{ textAlign: "center", marginBottom: 56 }}>
          <h2 style={{ fontSize: 32, fontWeight: 800, letterSpacing: -0.5, marginBottom: sub ? 14 : 0, color: C.text }}>{children}</h2>
          {sub && <p style={{ fontSize: 17, color: C.muted, maxWidth: 600, margin: "0 auto", lineHeight: 1.6 }}>{sub}</p>}
        </div>
      );
    }

    // â”€â”€â”€ Hero â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function Hero({ stats, config, isMobile }) {
      const subs = stats?.activeSubscribers;
      const subsRaw = subs && subs > 0 ? Math.floor(subs / 1000) * 1000 : 110000;
      const subsAnimated = useCountUp(subsRaw);
      const readersAnimated = useCountUp(config.engagedReaders);
      const openRateAnimated = useCountUp(config.uniqueOpenRate);
      const rebookAnimated = useCountUp(config.pavedRebookRate);

      const heroStats = [
        { label: "Subscribers", display: subsAnimated.toLocaleString() + "+", live: subs > 0 },
        { label: "Engaged Readers", display: readersAnimated.toLocaleString() },
        { label: "Unique Open Rate", display: openRateAnimated + "%" },
        { label: "Sponsors Rebook", display: rebookAnimated + "%" },
      ];
      return (
        <section style={{ padding: isMobile ? "60px 24px 48px" : "100px 24px 80px", textAlign: "center", background: C.bg }}>
          <div style={{ maxWidth: 860, margin: "0 auto" }} className="fade-in">
            <p style={{ fontSize: 13, fontWeight: 700, textTransform: "uppercase", letterSpacing: 3, color: C.accent, marginBottom: 24 }}>The Mommy Newsletter</p>
            <h1 style={{ fontSize: isMobile ? 30 : 48, fontWeight: 800, lineHeight: 1.12, letterSpacing: -1.5, marginBottom: 40, color: C.text }}>
              Partner with the #1 Family{isMobile ? " " : <br />}Newsletter on Paved
            </h1>
            <div style={{
              display: "grid",
              gridTemplateColumns: isMobile ? "1fr 1fr" : "repeat(4, 1fr)",
              gap: isMobile ? 16 : 32,
              maxWidth: 720, margin: "0 auto 48px",
            }}>
              {heroStats.map((s, i) => (
                <div key={i} style={{ textAlign: "center" }}>
                  <div style={{ display: "flex", alignItems: "center", justifyContent: "center", gap: 6 }}>
                    <span style={{ fontSize: isMobile ? 32 : 40, fontWeight: 800, color: C.text }}>{s.display}</span>
                    {s.live && <span style={{ width: 8, height: 8, borderRadius: 4, background: C.green, display: "inline-block", animation: "pulseGlow 2s infinite" }} />}
                  </div>
                  <span style={{ fontSize: 12, color: C.muted, fontWeight: 600, textTransform: "uppercase", letterSpacing: 1 }}>{s.label}</span>
                </div>
              ))}
            </div>
            <a href="#pricing" style={{
              display: "inline-block", padding: "16px 36px", background: C.accent, color: "#fff",
              borderRadius: 12, fontSize: 16, fontWeight: 700, textDecoration: "none",
              boxShadow: "0 4px 14px rgba(232,144,156,0.3)", transition: "all 0.15s",
            }}>
              See Packages â†“
            </a>
          </div>
        </section>
      );
    }

    // â”€â”€â”€ Brand Partners â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function BrandPartners({ config, isMobile }) {
      return (
        <Section bg={C.card} style={{ padding: "60px 24px" }}>
          <p style={{ textAlign: "center", fontSize: 13, fontWeight: 700, textTransform: "uppercase", letterSpacing: 2, color: C.dim, marginBottom: 28 }}>Trusted by leading brands</p>
          <div style={{ display: "flex", flexWrap: "wrap", justifyContent: "center", gap: 10 }}>
            {(config.brandPartners || []).map((b, i) => (
              <span key={i} style={{
                display: "inline-flex", alignItems: "center",
                padding: "14px 28px", borderRadius: 10,
                border: `1.5px solid #E0E0E0`, background: C.bg,
                fontSize: 17, fontWeight: 800, color: "#333",
                letterSpacing: 0.5, boxShadow: "0 1px 3px rgba(0,0,0,0.04)",
              }}>{b}</span>
            ))}
          </div>
        </Section>
      );
    }

    // â”€â”€â”€ Demographics â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function Demographics({ config, isMobile }) {
      const stats = [
        { label: "Engaged Readers", value: num(config.engagedReaders), color: C.accent },
        { label: "Unique Open Rate", value: config.uniqueOpenRate + "%+", color: C.green },
        { label: "Total Open Rate", value: config.totalOpenRate, color: C.purple },
      ];
      return (
        <Section bg={C.bg}>
          <SectionTitle sub="Who reads The Mommy">Your Audience</SectionTitle>
          <div style={{ display: "flex", flexWrap: "wrap", justifyContent: "center", gap: 20, marginBottom: 48 }}>
            {stats.map((s, i) => (
              <div key={i} style={{
                textAlign: "center", padding: "24px 32px", borderRadius: 14,
                border: `1px solid ${C.border}`, background: C.bg, minWidth: 180,
                boxShadow: "0 2px 8px rgba(0,0,0,0.03)",
              }}>
                <div style={{ fontSize: 32, fontWeight: 800, color: s.color, marginBottom: 4 }}>{s.value}</div>
                <div style={{ fontSize: 12, color: C.muted, fontWeight: 600, textTransform: "uppercase", letterSpacing: 0.5 }}>{s.label}</div>
              </div>
            ))}
          </div>
          <div style={{ maxWidth: 640, margin: "0 auto" }}>
            {(config.demographics || []).map((d, i) => (
              <p key={i} style={{ fontSize: 16, color: C.text, lineHeight: 1.8, marginBottom: 12, paddingLeft: 32, position: "relative" }}>
                <span style={{ position: "absolute", left: 0, fontSize: 18 }}>{["ğŸ‘©", "ğŸŒ", "ğŸ›’"][i] || "â€¢"}</span>
                {d}
              </p>
            ))}
          </div>
        </Section>
      );
    }

    // â”€â”€â”€ Testimonials â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function Testimonials({ config, isMobile }) {
      const [showAll, setShowAll] = useState(false);
      const all = config.testimonials || [];
      const featured = all.filter(t => t.featured !== false).slice(0, 3);
      const expanded = all.filter(t => t.featured === false);

      const TestimonialCard = ({ t, i }) => (
        <div key={i} style={{
          flex: 1, minWidth: isMobile ? "auto" : 280, padding: 32, borderRadius: 16, background: C.bg,
          border: `1px solid ${C.border}`, position: "relative",
        }}>
          <div style={{ fontSize: 48, lineHeight: 1, color: C.accent, opacity: 0.3, marginBottom: 8, fontFamily: "Georgia, serif" }}>"</div>
          <p style={{ fontSize: 15, color: C.text, lineHeight: 1.7, marginBottom: 20 }}>{t.quote}</p>
          <p style={{ fontSize: 14, fontWeight: 700, color: C.text }}>â€” {t.name}</p>
        </div>
      );

      return (
        <Section bg={C.card}>
          <SectionTitle>What Our Readers Say</SectionTitle>
          <div style={{ display: "flex", flexDirection: isMobile ? "column" : "row", gap: 20 }}>
            {featured.map((t, i) => <TestimonialCard key={i} t={t} i={i} />)}
          </div>
          {expanded.length > 0 && (
            <>
              <div style={{ overflow: "hidden", maxHeight: showAll ? 2000 : 0, transition: "max-height 0.5s ease", marginTop: showAll ? 20 : 0 }}>
                <div style={{ display: "flex", flexDirection: isMobile ? "column" : "row", gap: 20, flexWrap: "wrap" }}>
                  {expanded.map((t, i) => <TestimonialCard key={i + 3} t={t} i={i + 3} />)}
                </div>
              </div>
              <div style={{ textAlign: "center", marginTop: 28 }}>
                <button onClick={() => setShowAll(!showAll)} style={{
                  background: "none", border: `1px solid ${C.border}`, borderRadius: 10,
                  padding: "12px 28px", fontSize: 15, fontWeight: 600, color: C.muted,
                  cursor: "pointer", fontFamily: FONT, transition: "all 0.15s",
                }}>
                  {showAll ? "Show less \u25B4" : "Read more from our community \u25BE"}
                </button>
              </div>
            </>
          )}
        </Section>
      );
    }

    // â”€â”€â”€ Dashboard Preview â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function DashboardPreview({ isMobile }) {
      const width = useWindowWidth();
      const isSmall = width <= 480;
      return (
        <Section bg={C.bg}>
          <SectionTitle sub="Every partner gets a live performance dashboard â€” updated automatically, accessible anytime, from any device. No waiting for end-of-campaign reports. No spreadsheets. No guessing.">
            Real-Time Campaign Tracking
          </SectionTitle>
          <div style={{
            background: "#0A0E1A", borderRadius: 16, padding: isMobile ? 24 : 48,
            maxWidth: 960, margin: "0 auto",
            color: "#E2E8F0", position: "relative", overflow: "hidden",
            boxShadow: "0 20px 60px rgba(0,0,0,0.3)",
            fontFamily: FONT,
          }}>
            {/* Shimmer overlay */}
            <div style={{ position: "absolute", top: 0, left: 0, right: 0, bottom: 0, pointerEvents: "none", overflow: "hidden" }}>
              <div style={{ position: "absolute", top: 0, left: 0, width: "100%", height: "100%", background: "linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.02) 50%, transparent 100%)", animation: "shimmer 5s ease-in-out infinite" }} />
            </div>
            {/* Header */}
            <div style={{ marginBottom: 20 }}>
              <div style={{ fontSize: 11, textTransform: "uppercase", letterSpacing: 2, color: "#4A5A72", marginBottom: 4 }}>Campaign Performance Report</div>
              <div style={{ fontSize: isMobile ? 20 : 24, fontWeight: 700, color: "#fff" }}>Sample Partner</div>
            </div>

            {/* Big number */}
            <div style={{ textAlign: "center", marginBottom: 20 }}>
              <div style={{ fontSize: 13, color: "#4A5A72" }}>Seen by</div>
              <div style={{ fontSize: isMobile ? 40 : 52, fontWeight: 700, color: "#4F8FF7", fontFamily: MONO }}>198,500</div>
              <div style={{ fontSize: 13, color: "#4A5A72" }}>readers</div>
            </div>

            {/* Mini chart */}
            <div style={{ marginBottom: 20, textAlign: "center" }}>
              <svg width="100%" height={isMobile ? 70 : 100} viewBox="0 0 400 80" preserveAspectRatio="none">
                <defs>
                  <linearGradient id="chartGrad" x1="0" y1="0" x2="0" y2="1">
                    <stop offset="0%" stopColor="#4F8FF7" stopOpacity="0.3" />
                    <stop offset="100%" stopColor="#4F8FF7" stopOpacity="0" />
                  </linearGradient>
                </defs>
                <polygon points="0,70 60,62 120,55 180,42 240,33 300,20 360,8 360,80 0,80" fill="url(#chartGrad)" />
                <polyline points="0,70 60,62 120,55 180,42 240,33 300,20 360,8" fill="none" stroke="#4F8FF7" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round" style={{ animation: "chartGlow 3s ease-in-out infinite" }} />
              </svg>
            </div>

            {/* Three stat cards */}
            <div style={{ display: "flex", flexDirection: isSmall ? "column" : "row", gap: 12, marginBottom: 16 }}>
              {[
                { label: "Total Opens", value: "198,500", color: "#F97316" },
                { label: "Total Clicks", value: "2,623", color: "#22C55E" },
                { label: "Click-Through Rate", value: "1.32%", color: "#EAB308" },
              ].map((s, i) => (
                <div key={i} style={{
                  flex: 1, background: "#0F1420", border: "1px solid #1E2A3A", borderRadius: 10,
                  padding: isMobile ? "12px 14px" : "16px", borderTop: `2px solid ${s.color}`,
                }}>
                  <div style={{ fontSize: 10, textTransform: "uppercase", letterSpacing: 1, color: "#4A5A72" }}>{s.label}</div>
                  <div style={{ fontSize: isMobile ? 18 : 24, fontWeight: 700, color: s.color, fontFamily: MONO }}>{s.value}</div>
                </div>
              ))}
            </div>

            {/* Progress bar */}
            <div style={{ background: "#0F1420", border: "1px solid #1E2A3A", borderRadius: 10, padding: isMobile ? "12px 14px" : 16 }}>
              <div style={{ display: "flex", justifyContent: "space-between", marginBottom: 8 }}>
                <span style={{ fontSize: 12, color: "#4A5A72" }}>Campaign Progress</span>
                <span style={{ fontSize: 12, color: "#E2E8F0" }}>7 of 12 emails sent</span>
              </div>
              <div style={{ background: "#1E2A3A", borderRadius: 6, height: 8, overflow: "hidden" }}>
                <div style={{ background: "linear-gradient(90deg, #4F8FF7, #22C55E)", width: "58%", height: "100%", borderRadius: 6 }} />
              </div>
            </div>

            {/* Premium badges */}
            <div style={{ marginTop: 14, display: "flex", gap: 8, flexWrap: "wrap" }}>
              <span style={{ fontSize: 11, color: "#C084FC", border: "1px solid rgba(124,58,237,0.2)", padding: "4px 10px", borderRadius: 20 }}>âœ¦ Primary Placement</span>
              <span style={{ fontSize: 11, color: "#C084FC", border: "1px solid rgba(124,58,237,0.2)", padding: "4px 10px", borderRadius: 20 }}>âœ¦ Category Exclusivity</span>
            </div>
          </div>

          {/* CTA button */}
          <div style={{ textAlign: "center", marginTop: 32 }}>
            <a href="/s/demo" target="_blank" rel="noopener noreferrer" style={{
              display: "inline-flex", alignItems: "center", gap: 8,
              padding: "16px 32px", background: C.accent, color: "#fff",
              border: "none", borderRadius: 12, fontSize: 16, fontWeight: 700,
              textDecoration: "none", transition: "all 0.2s",
              minHeight: 52, boxShadow: "0 4px 14px rgba(232,144,156,0.3)",
            }}>
              Explore the Live Demo â†’
            </a>
            <p style={{ fontSize: 14, color: C.muted, marginTop: 14 }}>
              Every partner gets their own private dashboard â€” updated automatically after each send.
            </p>
          </div>
        </Section>
      );
    }

    // â”€â”€â”€ Pricing Tiers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function PricingSection({ config, stats, isMobile, onSelectTier }) {
      const [takeoverState, setTakeoverState] = useState({});
      const subscriberCount = (stats?.activeSubscribers > 0) ? stats.activeSubscribers : (config.engagedReaders || 31000);
      const adj = getPriceAdjustment(subscriberCount, config.pricingMilestones);
      const nextMs = getNextMilestone(subscriberCount, config.pricingMilestones);
      const avgOpens = stats?.avgOpensPerSend || config.engagedReaders;
      const tierOrder = isMobile ? ["growth", "starter", "partner"] : ["starter", "growth", "partner"];

      return (
        <Section id="pricing" bg={C.card}>
          <SectionTitle>Partnership Packages</SectionTitle>
          {nextMs && (
            <div style={{ textAlign: "center", padding: "16px 24px", borderRadius: 12, background: C.amberDim, border: `1px solid #FDE68A`, marginBottom: 48, fontSize: 15, color: "#92400E" }}>
              <strong>Rates based on our current audience of {num(subscriberCount)} subscribers.</strong>
              {" "}Lock in today's rates â€” next increase at {num(nextMs.subscribers)} subscribers.
            </div>
          )}
          <div style={{ display: "flex", flexDirection: isMobile ? "column" : "row", gap: 24, alignItems: isMobile ? "stretch" : "stretch" }}>
            {tierOrder.map(key => {
              const tier = config.tiers?.[key];
              if (!tier) return null;
              const isRec = tier.recommended;
              const isTakeover = takeoverState[key] || false;
              const basePrice = tier.price + (adj * tier.placements);
              const takeoverTotal = (tier.takeoverPrice || 0) + (adj * tier.placements);
              const displayPrice = isTakeover ? takeoverTotal : basePrice;
              const valueTotal = (tier.valueStack || []).reduce((s, v) => s + v.value, 0);
              const guarantee = calcGuarantee(avgOpens, tier.placements, config.guaranteeMultiplier);

              return (
                <div key={key} style={{
                  flex: 1, borderRadius: 18, display: "flex", flexDirection: "column",
                  border: `${isRec ? 2 : 1}px solid ${isRec ? C.accent : C.border}`,
                  background: C.bg, overflow: "hidden", position: "relative",
                  boxShadow: isRec ? "0 12px 40px rgba(232,144,156,0.15)" : "0 2px 8px rgba(0,0,0,0.04)",
                  transform: isRec && !isMobile ? "scale(1.03)" : "none",
                  zIndex: isRec ? 1 : 0,
                }}>
                  {isRec && (
                    <div style={{ background: C.accent, color: "#fff", textAlign: "center", padding: "8px 0", fontSize: 11, fontWeight: 700, letterSpacing: 1.5, textTransform: "uppercase" }}>
                      Most Popular
                    </div>
                  )}
                  <div style={{ padding: 28, display: "flex", flexDirection: "column", flex: 1 }}>
                    <h3 style={{ fontSize: 22, fontWeight: 700, marginBottom: 4, color: C.text }}>{tier.name}</h3>
                    <p style={{ fontSize: 14, color: C.muted, marginBottom: 20, lineHeight: 1.5 }}>{tier.tagline}</p>
                    <p style={{ fontSize: 14, fontWeight: 700, color: C.accent, marginBottom: 16 }}>{tier.placements} Newsletter Placements</p>

                    {guarantee > 0 && (
                      <div style={{ padding: "12px 14px", borderRadius: 10, background: C.greenDim, marginBottom: 16, fontSize: 13, color: C.greenDark, display: "flex", gap: 8, alignItems: "flex-start" }}>
                        <span style={{ fontSize: 18, lineHeight: 1 }}>ğŸ›¡ï¸</span>
                        <div>
                          <strong>Guaranteed {num(guarantee)}+ reader impressions</strong>
                          <span style={{ display: "block", fontSize: 12, marginTop: 2, opacity: 0.8 }}>If we don't hit it, we keep running free.</span>
                        </div>
                      </div>
                    )}

                    <div style={{ marginBottom: 20 }}>
                      {(tier.features || []).map((f, i) => (
                        <div key={i} style={{ display: "flex", gap: 8, marginBottom: 10, fontSize: 14, color: C.text, lineHeight: 1.5 }}>
                          <span style={{ color: C.green, fontWeight: 700, flexShrink: 0 }}>âœ“</span>
                          <span>{f}</span>
                        </div>
                      ))}
                    </div>

                    {/* Value Stack */}
                    {(tier.valueStack || []).length > 0 && (
                      <div style={{ borderTop: `1px solid ${C.border}`, paddingTop: 16, marginBottom: 16 }}>
                        <p style={{ fontSize: 11, fontWeight: 700, textTransform: "uppercase", letterSpacing: 1, color: C.dim, marginBottom: 12 }}>Value Breakdown</p>
                        {tier.valueStack.map((v, i) => (
                          <div key={i} style={{ display: "flex", justifyContent: "space-between", alignItems: "center", padding: "6px 0", fontSize: 13, color: C.muted, borderBottom: i < tier.valueStack.length - 1 ? `1px dotted ${C.border}` : "none" }}>
                            <span style={{ flex: 1 }}>{v.label}</span>
                            <span style={{ fontFamily: MONO, fontWeight: 600, color: "#374151", whiteSpace: "nowrap" }}>{money(v.value)}</span>
                          </div>
                        ))}
                        <div style={{ display: "flex", justifyContent: "space-between", fontSize: 14, fontWeight: 700, color: "#9CA3AF", marginTop: 10, paddingTop: 10, borderTop: `1px solid ${C.border}`, textDecoration: "line-through" }}>
                          <span>Total Value</span>
                          <span style={{ fontFamily: MONO }}>{money(valueTotal)}</span>
                        </div>
                      </div>
                    )}

                    {/* Price */}
                    <div style={{ textAlign: "center", padding: "24px 0 20px", marginBottom: 16, borderRadius: 14, background: isRec ? C.accentLight : C.card, flex: "none" }}>
                      <div style={{ fontSize: 11, fontWeight: 700, textTransform: "uppercase", letterSpacing: 1, color: C.dim, marginBottom: 6 }}>Your Investment</div>
                      <div style={{ fontSize: 32, fontWeight: 800, color: C.text, transition: "all 0.2s" }}>{money(displayPrice)}</div>
                      {valueTotal > displayPrice && (
                        <div style={{
                          display: "inline-block", marginTop: 10, padding: "4px 12px", borderRadius: 20,
                          background: "#DCFCE7", color: "#16A34A", fontSize: 13, fontWeight: 600,
                        }}>
                          Save {money(valueTotal - displayPrice)}
                        </div>
                      )}
                    </div>

                    {/* Takeover Toggle */}
                    {tier.includeTakeoverOption && tier.takeoverPrice && (
                      <div style={{
                        padding: "14px 16px", borderRadius: 12, marginBottom: 16, cursor: "pointer", transition: "all 0.15s",
                        border: `1px solid ${isTakeover ? C.accent : C.border}`,
                        background: isTakeover ? C.accentLight : "transparent",
                      }} onClick={() => setTakeoverState(s => ({ ...s, [key]: !s[key] }))}>
                        <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center" }}>
                          <div>
                            <span style={{ fontSize: 14, fontWeight: 600, color: isTakeover ? C.accentDark : C.text }}>Newsletter Takeover</span>
                            <span style={{ fontSize: 12, color: C.muted, marginLeft: 8 }}>+$200/email</span>
                          </div>
                          <div style={{ width: 40, height: 22, borderRadius: 11, padding: 2, background: isTakeover ? C.accent : C.dim, transition: "background 0.15s", display: "flex", alignItems: "center" }}>
                            <div style={{ width: 18, height: 18, borderRadius: 9, background: "#fff", transform: isTakeover ? "translateX(18px)" : "translateX(0)", transition: "transform 0.15s" }} />
                          </div>
                        </div>
                        {isTakeover && (
                          <p style={{ fontSize: 13, color: C.accentDark, marginTop: 8, lineHeight: 1.4 }}>Sole sponsor per email Â· ~25% higher engagement</p>
                        )}
                      </div>
                    )}

                    <div style={{ marginTop: "auto" }}>
                      <a href="#inquiry" onClick={() => { window.__selectedTier = key; window.__selectedTakeover = isTakeover; }} style={{
                        display: "block", textAlign: "center", padding: "16px 0", borderRadius: 12,
                        background: isRec ? C.accent : "transparent", color: isRec ? "#fff" : C.accent,
                        border: isRec ? "none" : `2px solid ${C.accent}`, fontSize: 16, fontWeight: 700,
                        textDecoration: "none", transition: "all 0.15s", minHeight: 52,
                        boxShadow: isRec ? "0 4px 14px rgba(232,144,156,0.25)" : "none",
                      }}>
                        Get Started â†’
                      </a>
                    </div>
                  </div>
                </div>
              );
            })}
          </div>
        </Section>
      );
    }

    // â”€â”€â”€ How It Works â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function HowItWorks({ config, isMobile }) {
      const mockupStyle = { background: "#0A0E1A", borderRadius: 12, padding: isMobile ? 20 : 24, minHeight: isMobile ? 140 : 160, display: "flex", flexDirection: "column", justifyContent: "center" };
      const example = (config.liveExamples || [])[0];
      return (
        <Section bg={C.card}>
          <SectionTitle sub="Three touchpoints in every sponsored issue">What Your Sponsorship Looks Like</SectionTitle>
          <div style={{ display: "flex", flexDirection: isMobile ? "column" : "row", gap: 24, marginBottom: 36 }}>
            {/* Card 1: Featured Banner */}
            <div style={{ flex: 1 }}>
              <div style={mockupStyle}>
                <div style={{ display: "flex", alignItems: "center", gap: 10, marginBottom: 12 }}>
                  <div style={{ width: 28, height: 28, borderRadius: 6, background: "#1E2A3A", display: "flex", alignItems: "center", justifyContent: "center", fontSize: 12, color: "#4A5A72" }}>TM</div>
                  <span style={{ fontSize: 13, color: "#4A5A72" }}>The Mommy</span>
                </div>
                <div style={{ padding: "10px 14px", background: "#111827", borderRadius: 8, border: "1px solid #1E2A3A" }}>
                  <span style={{ fontSize: 12, color: "#6B7280" }}>Together with </span>
                  <span style={{ fontSize: 12, color: "#4F8FF7", fontWeight: 700 }}>Your Brand</span>
                </div>
              </div>
              <h4 style={{ fontSize: 16, fontWeight: 700, color: C.text, marginTop: 16, marginBottom: 4 }}>Featured Banner</h4>
              <p style={{ fontSize: 14, color: C.muted, lineHeight: 1.6 }}>Your logo at the top of every email</p>
            </div>

            {/* Card 2: Promotional Intro */}
            <div style={{ flex: 1 }}>
              <div style={mockupStyle}>
                <div style={{ display: "flex", flexDirection: "column", gap: 6 }}>
                  <div style={{ height: 8, background: "#1E2A3A", borderRadius: 4, width: "90%" }} />
                  <div style={{ height: 8, background: "#1E2A3A", borderRadius: 4, width: "75%" }} />
                  <div style={{ height: 8, background: "rgba(79,143,247,0.2)", borderRadius: 4, width: "85%", border: "1px solid rgba(79,143,247,0.15)" }} />
                  <div style={{ height: 8, background: "#1E2A3A", borderRadius: 4, width: "70%" }} />
                  <div style={{ height: 8, background: "#1E2A3A", borderRadius: 4, width: "80%" }} />
                </div>
              </div>
              <h4 style={{ fontSize: 16, fontWeight: 700, color: C.text, marginTop: 16, marginBottom: 4 }}>Promotional Intro</h4>
              <p style={{ fontSize: 14, color: C.muted, lineHeight: 1.6 }}>A natural mention woven into the opening</p>
            </div>

            {/* Card 3: Main Ad Placement */}
            <div style={{ flex: 1 }}>
              <div style={mockupStyle}>
                <div style={{ fontSize: 11, fontWeight: 700, color: "#E2E8F0", marginBottom: 8 }}>Your Headline Here</div>
                <div style={{ height: 48, background: "#1E2A3A", borderRadius: 6, marginBottom: 8, display: "flex", alignItems: "center", justifyContent: "center" }}>
                  <span style={{ fontSize: 10, color: "#4A5A72" }}>Image</span>
                </div>
                <div style={{ display: "flex", flexDirection: "column", gap: 4, marginBottom: 10 }}>
                  <div style={{ height: 6, background: "#1E2A3A", borderRadius: 3, width: "95%" }} />
                  <div style={{ height: 6, background: "#1E2A3A", borderRadius: 3, width: "80%" }} />
                </div>
                <div style={{ alignSelf: "flex-start", padding: "5px 14px", background: "#4F8FF7", borderRadius: 4, fontSize: 10, fontWeight: 700, color: "#fff" }}>Learn More</div>
              </div>
              <h4 style={{ fontSize: 16, fontWeight: 700, color: C.text, marginTop: 16, marginBottom: 4 }}>Main Ad Placement</h4>
              <p style={{ fontSize: 14, color: C.muted, lineHeight: 1.6 }}>Headline, image, 100 words, and call-to-action</p>
            </div>
          </div>

          {example && (
            <div style={{ padding: 24, background: C.blueDim, borderRadius: 12, textAlign: "center" }}>
              <div style={{ fontSize: 15, fontWeight: 600, color: C.text, marginBottom: 4 }}>See a real sponsorship in action</div>
              <div style={{ fontSize: 13, color: C.muted, marginBottom: 12 }}>{example.title} Ã— The Mommy â€” result: {example.cpc || "$1.53 per click"}</div>
              <a href={example.url} target="_blank" rel="noopener noreferrer" style={{ color: C.blue, fontWeight: 600, fontSize: 14, textDecoration: "none" }}>View Live Example â†’</a>
            </div>
          )}
        </Section>
      );
    }

    // â”€â”€â”€ CPM Comparison â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function CpmComparison({ config, stats, isMobile }) {
      const growth = config.tiers?.growth;
      const avgOpens = stats?.avgOpensPerSend || config.engagedReaders;
      const cpm = growth && avgOpens > 0 ? ((growth.price / (avgOpens * growth.placements)) * 1000).toFixed(0) : "~24";

      const channels = [
        { name: "Instagram Ads", cpm: "$6-10", note: "Algorithmic, easily skipped" },
        { name: "Facebook Ads", cpm: "$7-12", note: "Algorithmic, easily skipped" },
        { name: "Display Ads", cpm: "$5-15", note: "Banner blindness, ad blockers" },
        { name: "The Mommy Newsletter", cpm: `~$${cpm}`, note: `${config.uniqueOpenRate}% open rate Â· Direct inbox Â· Trusted voice`, highlight: true },
      ];

      return (
        <Section bg={C.bg}>
          <SectionTitle sub="Premium placement, premium results">How We Compare</SectionTitle>
          <div style={{ display: "grid", gridTemplateColumns: isMobile ? "1fr 1fr" : "repeat(4, 1fr)", gap: 16, maxWidth: 900, margin: "0 auto" }}>
            {channels.map((ch, i) => (
              <div key={i} style={{
                padding: 24, borderRadius: 16, textAlign: "center",
                background: ch.highlight ? C.accentLight : C.card,
                border: `${ch.highlight ? 2 : 1}px solid ${ch.highlight ? C.accent : C.border}`,
                boxShadow: ch.highlight ? "0 8px 24px rgba(232,144,156,0.15)" : "0 2px 8px rgba(0,0,0,0.03)",
                transform: ch.highlight ? "scale(1.02)" : "none",
              }}>
                <div style={{ fontSize: 15, fontWeight: ch.highlight ? 700 : 600, color: ch.highlight ? C.accentDark : C.text, marginBottom: 12 }}>{ch.name}</div>
                <div style={{ fontSize: 24, fontWeight: 800, fontFamily: MONO, color: ch.highlight ? C.accentDark : C.text, marginBottom: 12 }}>{ch.cpm}</div>
                <div style={{ fontSize: 11, fontWeight: 600, textTransform: "uppercase", letterSpacing: 0.5, color: ch.highlight ? C.accentDark : C.dim, marginBottom: 12 }}>CPM</div>
                <div style={{ fontSize: 13, color: ch.highlight ? C.accentDark : C.muted, lineHeight: 1.5 }}>{ch.note}</div>
              </div>
            ))}
          </div>
          <p style={{ fontSize: 13, color: C.dim, textAlign: "center", marginTop: 24 }}>Based on Growth tier pricing Â· Rates vary by package</p>
        </Section>
      );
    }

    // â”€â”€â”€ Lock-In Messaging â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function LockIn({ config, stats, isMobile }) {
      const subs = (stats?.activeSubscribers > 0) ? stats.activeSubscribers : (config.engagedReaders || 31000);
      const milestones = config.pricingMilestones || [];
      const nextMs = getNextMilestone(subs, milestones);
      const progressPct = nextMs ? Math.min(Math.round((subs / nextMs.subscribers) * 100), 99) : 100;

      return (
        <Section bg={C.card}>
          <SectionTitle>Lock In Today's Rates</SectionTitle>
          <div style={{ maxWidth: 640, margin: "0 auto" }}>
            <div style={{ padding: isMobile ? 24 : 36, borderRadius: 16, background: C.amberDim, border: "1px solid #FDE68A" }}>
              <div style={{ display: "flex", alignItems: "center", gap: 10, marginBottom: 16 }}>
                <span style={{ fontSize: 22 }}>ğŸ“ˆ</span>
                <div>
                  <div style={{ fontSize: 16, fontWeight: 700, color: "#92400E" }}>Current rates based on {num(subs)} subscribers</div>
                  {nextMs && <div style={{ fontSize: 14, color: "#B45309" }}>Lock in today â€” next increase at {num(nextMs.subscribers)}</div>}
                </div>
              </div>

              {nextMs && (
                <div style={{ marginBottom: 20 }}>
                  <div style={{ background: "#FDE68A", borderRadius: 8, height: 12, overflow: "hidden", position: "relative" }}>
                    <div style={{ background: "linear-gradient(90deg, #F59E0B, #D97706)", width: `${progressPct}%`, height: "100%", borderRadius: 8, transition: "width 1s ease" }} />
                  </div>
                  <div style={{ display: "flex", justifyContent: "space-between", marginTop: 6, fontSize: 12, color: "#92400E", fontWeight: 600 }}>
                    <span>{num(subs)}</span>
                    <span>{num(nextMs.subscribers)}</span>
                  </div>
                </div>
              )}

              <p style={{ fontSize: 14, color: "#92400E", lineHeight: 1.6 }}>
                Sponsors who commit now keep today's rates even as our audience (and rates) grow.
              </p>
            </div>
          </div>
        </Section>
      );
    }

    // â”€â”€â”€ Guarantee â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function Guarantee({ config }) {
      return (
        <Section bg={C.bg}>
          <div style={{ maxWidth: 620, margin: "0 auto", textAlign: "center" }}>
            <div style={{ width: 64, height: 64, borderRadius: 32, background: C.greenDim, display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 20px", fontSize: 28 }}>ğŸ›¡ï¸</div>
            <h2 style={{ fontSize: 28, fontWeight: 700, marginBottom: 16, color: C.text }}>Our Guarantee</h2>
            <p style={{ fontSize: 17, color: C.text, lineHeight: 1.7, marginBottom: 48 }}>
              If we don't hit your guaranteed reader impressions, we keep running until we do â€” <strong>at no extra cost.</strong>
            </p>
            <h3 style={{ fontSize: 20, fontWeight: 700, marginBottom: 12, color: C.text }}>Flexible Cancellation</h3>
            <p style={{ fontSize: 16, color: C.muted, lineHeight: 1.7 }}>{config.cancellationPolicy}</p>
          </div>
        </Section>
      );
    }

    // â”€â”€â”€ Inquiry Form â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function InquiryForm({ config, isMobile }) {
      const [tier, setTier] = useState("growth");
      const [takeover, setTakeover] = useState(false);
      const [name, setName] = useState("");
      const [email, setEmail] = useState("");
      const [company, setCompany] = useState("");
      const [message, setMessage] = useState("");
      const [sending, setSending] = useState(false);
      const [sent, setSent] = useState(false);
      const formRef = useRef(null);

      // Pick up tier from "Get Started" button click
      useEffect(() => {
        const checkTier = () => {
          if (window.__selectedTier) {
            setTier(window.__selectedTier);
            setTakeover(!!window.__selectedTakeover);
            window.__selectedTier = null;
            window.__selectedTakeover = null;
          }
        };
        window.addEventListener("hashchange", checkTier);
        const iv = setInterval(checkTier, 200);
        return () => { window.removeEventListener("hashchange", checkTier); clearInterval(iv); };
      }, []);

      const handleSubmit = async (e) => {
        e.preventDefault();
        if (!email) return;
        setSending(true);
        try {
          await fetch("/api/inquiry", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ name, email, company, tier, takeover, message }),
          });
          setSent(true);
        } catch {
          alert("Something went wrong. Please try again.");
        }
        setSending(false);
      };

      if (sent) {
        return (
          <Section id="inquiry" bg={C.card}>
            <div style={{ textAlign: "center", padding: "40px 0" }} className="fade-in">
              <div style={{ fontSize: 48, marginBottom: 16 }}>âœ‰ï¸</div>
              <h2 style={{ fontSize: 28, fontWeight: 700, marginBottom: 12, color: C.text }}>Thanks! We'll be in touch within 24 hours.</h2>
              <p style={{ fontSize: 16, color: C.muted }}>Check your email for a confirmation.</p>
            </div>
          </Section>
        );
      }

      const tiers = config.tiers || {};
      const tierKeys = ["starter", "growth", "partner"];
      const inputStyle = {
        width: "100%", padding: "16px 18px", borderRadius: 12,
        border: `1px solid ${C.border}`, fontSize: 16, fontFamily: FONT,
        color: C.text, background: C.bg, outline: "none", boxSizing: "border-box",
        minHeight: 52, transition: "border-color 0.15s, box-shadow 0.15s",
      };

      return (
        <Section id="inquiry" bg={C.card}>
          <SectionTitle sub="Tell us about your brand and we'll follow up with a custom proposal">Let's Get Started</SectionTitle>
          <form onSubmit={handleSubmit} ref={formRef} style={{ maxWidth: 520, margin: "0 auto" }}>
            {/* Tier selector */}
            <div style={{ display: "flex", gap: 8, marginBottom: 28, flexWrap: "wrap", justifyContent: "center" }}>
              {tierKeys.map(k => {
                const t = tiers[k];
                if (!t) return null;
                const isActive = tier === k;
                return (
                  <button key={k} type="button" onClick={() => setTier(k)} style={{
                    padding: "12px 24px", borderRadius: 10, fontSize: 15, fontWeight: 600, fontFamily: FONT,
                    cursor: "pointer", minHeight: 48, transition: "all 0.15s",
                    background: isActive ? C.accent : C.bg, color: isActive ? "#fff" : C.text,
                    border: `1px solid ${isActive ? C.accent : C.border}`,
                  }}>{t.name}</button>
                );
              })}
            </div>
            <div style={{ display: "flex", flexDirection: "column", gap: 14 }}>
              <input value={name} onChange={e => setName(e.target.value)} placeholder="Name" style={inputStyle} />
              <input value={email} onChange={e => setEmail(e.target.value)} placeholder="Email *" required type="email" style={inputStyle} />
              <input value={company} onChange={e => setCompany(e.target.value)} placeholder="Company" style={inputStyle} />
              <textarea value={message} onChange={e => setMessage(e.target.value)} placeholder="Message (optional)" rows={3} style={{ ...inputStyle, resize: "vertical", minHeight: 80 }} />
              <button type="submit" disabled={sending} style={{
                padding: "18px 0", borderRadius: 12, border: "none", background: C.accent, color: "#fff",
                fontSize: 16, fontWeight: 700, fontFamily: FONT, cursor: sending ? "not-allowed" : "pointer",
                opacity: sending ? 0.6 : 1, transition: "opacity 0.15s", minHeight: 56,
                boxShadow: "0 4px 14px rgba(232,144,156,0.25)",
              }}>{sending ? "Sending..." : "Send Inquiry â†’"}</button>
            </div>
            <p style={{ textAlign: "center", fontSize: 14, color: C.muted, marginTop: 20 }}>
              Or email us directly: <a href="mailto:hello@themommy.news" style={{ color: C.accent, fontWeight: 600, textDecoration: "none" }}>hello@themommy.news</a>
            </p>
          </form>
        </Section>
      );
    }

    // â”€â”€â”€ Footer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    function Footer({ config }) {
      const contactEmail = config.contactEmail || "hello@themommy.news";
      return (
        <section style={{ padding: "72px 24px 48px", textAlign: "center", background: C.bg, borderTop: `1px solid ${C.border}` }}>
          <p style={{ fontSize: 18, color: C.text, fontWeight: 600, marginBottom: 8 }}>Managing multiple brands or need something different?</p>
          <p style={{ fontSize: 15, color: C.muted, marginBottom: 24, lineHeight: 1.6 }}>We build custom packages for agencies and multi-brand partnerships.</p>
          <a href={`mailto:${contactEmail}?subject=Custom%20Partnership%20Inquiry`} style={{
            display: "inline-block", padding: "14px 32px", borderRadius: 12,
            border: `2px solid ${C.accent}`, color: C.accent, fontSize: 16, fontWeight: 700,
            textDecoration: "none", marginBottom: 48, minHeight: 52, lineHeight: "24px",
          }}>Email Us â†’</a>
          <p style={{ fontSize: 13, color: C.dim }}>The Mommy Newsletter Â· themommy.news</p>
        </section>
      );
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // MAIN APP
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function PackagesPage() {
      const [stats, setStats] = useState(null);
      const [config, setConfig] = useState(null);
      const [loading, setLoading] = useState(true);
      const width = useWindowWidth();
      const isMobile = width <= MOBILE;

      useEffect(() => {
        let mounted = true;

        async function loadData() {
          // Try cached stats first
          const cached = sessionStorage.getItem("pkg-stats");
          if (cached) {
            try {
              const parsed = JSON.parse(cached);
              const age = Date.now() - new Date(parsed.fetchedAt).getTime();
              if (age < 3600000) {
                if (mounted) setStats(parsed);
              }
            } catch {}
          }

          // Fetch both in parallel
          const [statsRes, configRes] = await Promise.allSettled([
            fetch("/api/stats").then(r => r.ok ? r.json() : null),
            fetch("/api/packages-config").then(r => r.ok ? r.json() : null),
          ]);

          if (!mounted) return;

          if (statsRes.status === "fulfilled" && statsRes.value) {
            setStats(statsRes.value);
            sessionStorage.setItem("pkg-stats", JSON.stringify(statsRes.value));
          }

          if (configRes.status === "fulfilled" && configRes.value) {
            const cfg = typeof configRes.value === "string" ? JSON.parse(configRes.value) : configRes.value;
            setConfig(cfg);
          }

          setLoading(false);
        }

        loadData();
        return () => { mounted = false; };
      }, []);

      // Fallback defaults
      const cfg = config || {
        engagedReaders: 31000, uniqueOpenRate: 75, totalOpenRate: "90-110%",
        instagramFollowers: 6081, facebookFollowers: 14000,
        demographics: [
          "100% moms, aged 22-45",
          "94% in the USA, with 6% in Canada, Australia, and the UK",
          "Interests: Baby/toddler gear, health & wellness, family finances, education, food & nutrition, home organization, and self-care",
        ],
        pavedRebookRate: 92, brandPartners: ["Netflix", "Instacart", "Canva", "Betterment", "UPPAbaby", "BabyBjÃ¶rn", "Nanit", "Evenflo", "Blinkist", "Mockingbird", "ResortPass"],
        testimonials: [
          { quote: "I love the content and am obsessed with it all. It gives me inspiration for the future.. not only for my marriage, my kids, but my career as well. Thank you for making my life better all around with your newsletters.", name: "Amy Ballou", featured: true },
          { quote: "I feel like I'm talking to another Mom who's saying, 'have you heard about this? Isn't it cool?'", name: "Mary Hoerchler", featured: true },
          { quote: "It is one of few emails I am excited to open and read.", name: "Alicia Lunsford", featured: true },
          { quote: "I absolutely love the newsletter. I love all the sections and have them saved in a folder on my email so I can go back and read them. You're doing an amazing job.", name: "Sarah Snyder", featured: false },
          { quote: "I love the newsletter. I have recommended it to two of my sisters with little ones. I love checking out the recipes!", name: "Erin Turcott", featured: false },
          { quote: "I absolutely love and look forward to reading your newsletter. I enjoy the polls and the recipes the most, but it's all great content! Thank you for providing this to myself and countless other mommas.", name: "Erica Schwarz", featured: false },
          { quote: "I absolutely look forward to all the emails from The Mommy! I love it all!", name: "Stefani Nixon", featured: false },
          { quote: "Thank you for all you do. I have been through the thick of it with postpartum and I look forward to your newsletters. Thank you!", name: "Jordan Grube", featured: false },
          { quote: "I'm new to being a mom, but it's so refreshing to see encouragement with the polls! Thank you so much for putting together something that makes it feel like I'm not alone in navigating such a big change.", name: "Jennifer Robinson", featured: false },
        ],
        liveExamples: [{ title: "ResortPass", url: "https://newsletter.themommy.news/p/ipad-holder-car-organizer-tidy-travel", cpc: "$1.53/click" }],
        baseRatePerPlacement: 750, takeoverPremiumPerPlacement: 200,
        tiers: {
          starter: {
            name: "Starter", tagline: "For brands testing newsletter sponsorship for the first time.", placements: 6, price: 3500,
            features: ["Standard placement position", "Live performance dashboard"],
            includeTakeoverOption: false,
            valueStack: [{ label: "6 Newsletter Placements", value: 4500 }, { label: "Live Performance Dashboard", value: 500 }],
          },
          growth: {
            name: "Growth", tagline: "For brands ready to own their category.", placements: 12, price: 7500, recommended: true,
            features: ["Primary placement (top of email)", "Category exclusivity for contract period", "2 Instagram stories + 2 Facebook posts", "Live performance dashboard + mid-campaign report"],
            includeTakeoverOption: true, takeoverPrice: 9900,
            valueStack: [
              { label: "12 Newsletter Placements", value: 9000 }, { label: "Primary Placement", value: 1200 },
              { label: "Category Exclusivity", value: 1500 }, { label: "2 IG Stories + 2 FB Posts", value: 800 },
              { label: "Dashboard + Mid-Campaign Report", value: 500 },
            ],
          },
          partner: {
            name: "Partner", tagline: "For brands that want to become synonymous with The Mommy.", placements: 24, price: 15000,
            features: ["Exclusive placement (sole sponsor per issue)", "Primary placement on every send", "Category exclusivity for the full year", "4 Instagram posts + 4 Instagram stories", "Welcome sequence integration", "1 dedicated send (entire email is your content)", "Live performance dashboard + quarterly reports", "Direct access for campaign strategy"],
            includeTakeoverOption: true, takeoverPrice: 19800,
            valueStack: [
              { label: "24 Newsletter Placements", value: 18000 }, { label: "Exclusive Placement", value: 2400 },
              { label: "Primary Placement", value: 2400 }, { label: "Category Exclusivity (full year)", value: 3000 },
              { label: "4 IG Posts + 4 IG Stories", value: 1600 }, { label: "Welcome Sequence Integration", value: 1500 },
              { label: "1 Dedicated Send", value: 1500 }, { label: "Dashboard + Quarterly Reports", value: 500 },
              { label: "Campaign Strategy Access", value: 500 },
            ],
          },
        },
        pricingMilestones: [
          { subscribers: 40000, adjustment: 0 }, { subscribers: 45000, adjustment: 100 },
          { subscribers: 50000, adjustment: 200 }, { subscribers: 55000, adjustment: 300 },
        ],
        cancellationPolicy: "Cancel with 30 days' notice. Unused placements are refunded on a prorated basis. No penalties, no fine print.",
        guaranteeMultiplier: 0.6,
        contactEmail: "hello@themommy.news", calendlyUrl: "",
      };

      if (loading && !config) {
        return (
          <div style={{ minHeight: "100vh", display: "flex", alignItems: "center", justifyContent: "center", background: C.bg }}>
            <div style={{ textAlign: "center" }}>
              <p style={{ fontSize: 13, fontWeight: 700, textTransform: "uppercase", letterSpacing: 3, color: C.accent, animation: "pulse 2s infinite" }}>The Mommy Newsletter</p>
            </div>
          </div>
        );
      }

      return (
        <div>
          <Hero stats={stats} config={cfg} isMobile={isMobile} />
          <BrandPartners config={cfg} isMobile={isMobile} />
          <Demographics config={cfg} isMobile={isMobile} />
          <Testimonials config={cfg} isMobile={isMobile} />
          <DashboardPreview isMobile={isMobile} />
          <PricingSection config={cfg} stats={stats} isMobile={isMobile} />
          <HowItWorks config={cfg} isMobile={isMobile} />
          <CpmComparison config={cfg} stats={stats} isMobile={isMobile} />
          <LockIn config={cfg} stats={stats} isMobile={isMobile} />
          <Guarantee config={cfg} />
          <InquiryForm config={cfg} isMobile={isMobile} />
          <Footer config={cfg} />
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<PackagesPage />);

    // Scroll fade-in observer
    requestAnimationFrame(() => {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(e => {
          if (e.isIntersecting) {
            e.target.style.opacity = '1';
            e.target.style.transform = 'translateY(0)';
          }
        });
      }, { threshold: 0.1 });
      document.querySelectorAll('.fade-section').forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(20px)';
        el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(el);
      });
    });
  </script>
</body>
</html>
